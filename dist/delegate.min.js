/**
 * @preserve delegate (c) KNOWLEDGECODE | MIT
 */
!function(t){"use strict";var e,r,n=(e=Element.prototype,r=e.matches||e.msMatchesSelector,function(t,e){return r.call(t,e)}),s=function(t,e){this.originalEvent=t,this.stop=!t.bubbles,this.abort=!1,this.currentTarget=e};s.prototype.preventDefault=function(){this.originalEvent.preventDefault()},s.prototype.stopPropagation=function(){this.stop=!0},s.prototype.stopImmediatePropagation=function(){this.abort=this.stop=!0};var i=[],o=function(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r)},a=function(t){return this._baseEventTarget=t,this._eventCache={},this._subscribers={},this};a.prototype.listener=function(t){for(var e,r,i,o,a,h=this._subscribers[t.type]||[],c=t.target;c.parentNode;){for(e=new s(t,c),r=[],i=0,o=h.length;i<o;i++)if((a=h[i]).selector&&n(c,a.selector)||!a.selector&&c===t.currentTarget){if(a.handler.call(c,e),e.abort)break}else r[r.length]=a;if(!r.length||e.stop)return;h=r,c=c.parentNode}for(c=t.currentTarget,e=new s(t,c),i=0,o=h.length;i<o&&((a=h[i]).selector||(a.handler.call(c,e),!e.abort));i++);},a.prototype.on=function(t,e,r){var n;return"function"==typeof e&&(r=e,e=null),~Object.keys(this._eventCache).indexOf(t)||(n=this.listener.bind(this),this._baseEventTarget.addEventListener(t,n,!0),this._eventCache[t]=n),this._subscribers[t]=this._subscribers[t]||[],this._subscribers[t].push({selector:e,handler:r}),this},a.prototype.off=function(t,e,r){var n=[];return"function"==typeof e&&(r=e,e=null),t?e||r?(o(this._subscribers[t],(function(t){t.selector===e&&t.handler===r||(n[n.length]=t)})),n.length?this._subscribers[t]=n:delete this._subscribers[t]):delete this._subscribers[t]:this._subscribers={},this},a.prototype.one=function(t,e,r){var n=this,s=function(i){n.off(t,e||s,s),r.call(this,i)};return"function"==typeof e?(r=e,e=null,this.on(t,s)):this.on(t,e,s)},a.prototype.clear=function(){this.off(),o(Object.keys(this._eventCache),function(t){this._baseEventTarget.removeEventListener(t,this._eventCache[t],!0)}.bind(this)),this._eventCache={};for(var t=0,e=i.length;t<e;t++)if(this._baseEventTarget===i[t].baseEventTarget){i.splice(t,1);break}},t.delegate=function(t){if(!t.addEventListener)throw new TypeError(t+" is not an EventTarget");for(var e=0,r=i.length;e<r;e++)if(t===i[e].baseEventTarget)return i[e].delegator;var n=new a(t);return i.push({baseEventTarget:t,delegator:n}),n}}(this);