/**
 * @preserve delegate (c) KNOWLEDGECODE | MIT
 */
class e{constructor(e,t){this.originalEvent=e,this.bubbles=e.bubbles,this.currentTarget=t}preventDefault(){this.originalEvent.preventDefault()}stopPropagation(){this.bubbles=!1}}const t=[];class s{constructor(e){return this._baseEventTarget=e,this._eventCache={},this._subscribers={},this}listener(t){let s=this._subscribers[t.type]||[],r=t.target;for(;r.parentNode;){const n=new e(t,r),i=[];for(const e of s)e.selector&&(r.matches(e.selector)?e.handler.call(r,n):i[i.length]=e);if(!i.length||!n.bubbles)return;s=i,r=r.parentNode}r=t.currentTarget;for(const n of s)n.selector||n.handler.call(r,new e(t,r))}on(e,t,s){if("function"==typeof t&&(s=t,t=null),!~Object.keys(this._eventCache).indexOf(e)){const t=this.listener.bind(this);this._baseEventTarget.addEventListener(e,t,{capture:!0,passive:!1}),this._eventCache[e]=t}return this._subscribers[e]=this._subscribers[e]||[],this._subscribers[e].push({selector:t,handler:s}),this}off(e,t,s){if("function"==typeof t&&(s=t,t=null),e)if(t||s){const r=[];for(const n of this._subscribers[e])n.selector===t&&n.handler===s||(r[r.length]=n);r.length?this._subscribers[e]=r:delete this._subscribers[e]}else delete this._subscribers[e];else this._subscribers={};return this}one(e,t,s){const r=this,n=function(i){r.off(e,t||n,n),s.call(this,i)};return"function"==typeof t?(s=t,t=null,this.on(e,n)):this.on(e,t,n)}clear(){this.off();for(const e of Object.keys(this._eventCache))this._baseEventTarget.removeEventListener(e,this._eventCache[e],{capture:!0});this._eventCache={};for(let e=0,s=t.length;e<s;e++)if(this._baseEventTarget===t[e].baseEventTarget){t.splice(e,1);break}return this}}export default e=>{if(!e instanceof EventTarget)throw new TypeError(`${e} is not an EventTarget`);for(const s of t)if(e===s.baseEventTarget)return s.object;const r=new s(e);return t.push({baseEventTarget:e,object:r}),r};