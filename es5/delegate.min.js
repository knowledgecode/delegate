/*
 delegate (c) KNOWLEDGECODE | MIT
*/
'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(e){return e.raw=e};$jscomp.createTemplateTagFirstArgWithRaw=function(e,g){e.raw=g;return e};$jscomp.arrayIteratorImpl=function(e){var g=0;return function(){return g<e.length?{done:!1,value:e[g++]}:{done:!0}}};$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}};
$jscomp.makeIterator=function(e){var g="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return g?g.call(e):$jscomp.arrayIterator(e)};
(function(e,g){"object"===typeof exports&&"undefined"!==typeof module?module.exports=g():"function"===typeof define&&define.amd?define(g):(e="undefined"!==typeof globalThis?globalThis:e||self,e.delegate=g())})(this,function(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.webkitMatchesSelector||Element.prototype.msMatchesSelector);var e=new WeakMap,g=function(a,b){for(var c=0,d=a.length;c<d;c++)if(b(a[c]))return a[c]},n=function(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],
c)},p=function(a,b){var c=[[],[]];n(a,function(d){return b(d)?c[0].push(d):c[1].push(d)});return c},l=function(a,b){this.originalEvent=a;this.stop=!a.bubbles;this.abort=!1;this.currentTarget=b};l.prototype.preventDefault=function(){this.originalEvent.preventDefault()};l.prototype.stopPropagation=function(){this.stop=!0};l.prototype.stopImmediatePropagation=function(){this.abort=this.stop=!0};var k=function(a){this._baseEventTarget=a;this._eventCache={};this._subscribers={};return this};k.prototype.listener=
function(a){var b=this._subscribers[a.type]||[],c=a.target;if(b.length){for(;(c||{}).parentNode;){b=$jscomp.makeIterator(p(b,function(m){return function(q){return m.matches(q.selector)||!q.selector&&m===a.currentTarget}}(c)));var d=b.next().value;b=b.next().value;if(d.length){for(var f=new l(a,c),h=0,r=d.length;h<r;h++)if(d[h].handler.call(c,f),f.abort)return;if(!b.length||f.stop)return}c=c.parentNode}d=$jscomp.makeIterator(p(b,function(m){return!m.selector})).next().value;if(d.length)for(c=a.currentTarget,
b=new l(a,c),f=0,h=d.length;f<h&&(d[f].handler.call(c,b),!b.abort);f++);}};k.prototype.on=function(a,b,c){"function"===typeof b&&(c=b,b=null);var d=this._subscribers[a]=this._subscribers[a]||[];g(d,function(f){return f.selector===b&&f.handler===c})||(d.push({selector:b,handler:c}),this._eventCache[a]||(d=this.listener.bind(this),this._eventCache[a]=d,this._baseEventTarget.addEventListener(a,d,!0)));return this};k.prototype.off=function(a,b,c){"function"===typeof b&&(c=b,b=null);a?b||c?(this._subscribers[a]=
(this._subscribers[a]||[]).filter(function(d){return d.selector!==b||c&&d.handler!==c}),this._subscribers[a].length||delete this._subscribers[a]):delete this._subscribers[a]:this._subscribers={};return this};k.prototype.one=function(a,b,c){var d=this,f=function(h){d.off(a,b||f,f);c.call(this,h)};return"function"===typeof b?(c=b,b=null,this.on(a,f)):this.on(a,b,f)};k.prototype.clear=function(){var a=this;this.off();n(Object.keys(this._eventCache),function(b){a._baseEventTarget.removeEventListener(b,
a._eventCache[b],!0)});this._eventCache={};e.delete(this._baseEventTarget)};return function(a){if("function"!==typeof a.addEventListener)throw new TypeError(a+" is not an EventTarget");var b;(b=e.get(a))||(b=new k(a),e.set(a,b));return b}});
